<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grafik OAIT</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- EKRAN LOGOWANIA -->
    <div class="login-container" id="loginScreen">
        <div class="login-box">
            <h2>Grafik OAIT</h2>
            <p class="text-muted mb-2">Wybierz u≈ºytkownika, aby kontynuowaƒá</p>
            <div id="staffLoginList"></div>
            <hr style="margin: 1rem 0; border-color: #eee;">
            <button class="btn btn-outline w-100" onclick="app.login('admin')">Logowanie dla administratora</button>
        </div>
    </div>

    <!-- G≈Å√ìWNA APLIKACJA -->
    <div class="app-container hidden" id="mainApp">
        <!-- Pasek boczny -->
        <aside class="sidebar">
            <div>
                <h3>Grafik OAIT</h3>
                <div id="currentUser" class="mt-3">
                    <div id="currentUserName" style="font-weight: 600;"></div>
                    <div id="currentUserRole" style="font-size: 0.9rem; color: var(--gray-700);"></div>
                </div>
            </div>
            <nav style="margin-top: 2rem;">
                <button class="nav-btn active" onclick="app.setView('calendar', event)">Kalendarz</button>
                <button class="nav-btn" onclick="app.setView('table', event)">Tabela</button>
                <button id="navAvailability" class="nav-btn" onclick="app.setView('availability', event)">Dostƒôpno≈õƒá</button>
            </nav>
            <div style="margin-top: auto;">
                <div id="adminTools" class="hidden">
                    <button class="btn btn-outline w-100 mb-2" onclick="app.openGenerator()">Generator</button>
                    <button class="btn btn-danger w-100" onclick="app.clearMonth()">Wyczy≈õƒá miesiƒÖc</button>
                </div>
                <button class="btn btn-ghost w-100 mt-2" onclick="app.logout()">Wyloguj</button>
            </div>
        </aside>

        <!-- G≈Ç√≥wna tre≈õƒá -->
        <main class="content">
            <div class="topbar">
                <div class="date-nav">
                    <button class="btn-icon" onclick="app.changeMonth(-1)">‚Üê</button>
                    <h2 id="monthTitle"></h2>
                    <button class="btn-icon" onclick="app.changeMonth(1)">‚Üí</button>
                    <button class="btn btn-outline" onclick="app.setToday()">Dzi≈õ</button>
                </div>
            </div>

            <!-- Widok Kalendarza -->
            <section id="viewCalendar" class="view-section">
                <div class="calendar-header-row">
                    <div>Pon</div><div>Wto</div><div>≈öro</div><div>Czw</div><div>PiƒÖ</div><div>Sob</div><div>Nie</div>
                </div>
                <div id="calendarGrid" class="calendar-grid"></div>
            </section>

            <!-- Widok Tabeli -->
            <section id="viewTable" class="view-section hidden">
                <div class="table-responsive">
                    <table id="mainTable" class="main-table"></table>
                </div>
            </section>

            <!-- Widok Dostƒôpno≈õci -->
            <section id="viewAvailability" class="view-section hidden">
                <div id="availGrid" class="avail-grid"></div>
            </section>
        </main>
    </div>

    <!-- MODALE -->
    <!-- Modal Edycji Dnia -->
    <div class="modal-overlay hidden" id="modalDay">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h3 id="modalDayTitle">Edycja dnia</h3>
                <button class="btn-close" onclick="app.closeModal('modalDay')">&times;</button>
            </div>
            <div class="modal-footer">
                <div id="weekendNotice" class="alert hidden">
                    Wy≈õwietlono tylko dy≈ºury weekendowe.
                    <button id="btnAddStandard" class="btn btn-primary btn-sm" onclick="app.addStandardWeekendStations()">Poka≈º resztƒô</button>
                </div>
                <button class="btn btn-primary" onclick="app.addCustomShiftRow()">Dodaj dy≈ºur</button>
                <button class="btn btn-ghost" onclick="app.closeModal('modalDay')">Zamknij</button>
            </div>
            <div class="modal-body" id="assignmentsList"></div>
        </div>
    </div>

    <!-- Modal Edycji Dostƒôpno≈õci -->
    <div class="modal-overlay hidden" id="modalAvailEdit">
        <div class="modal modal-sm">
                <div class="modal-header">
                    <h3 id="modalAvailDate">Edycja</h3>
                    <button class="btn-close" onclick="app.closeModal('modalAvailEdit')">&times;</button>
                </div>
                <div class="modal-body">
                    <label class="form-label">Wybierz rodzaj dyspozycyjno≈õci:</label>
                    <div class="avail-options">
                        <label class="avail-radio-card">
                            <input type="radio" name="availType" value="24h" onchange="app.toggleAvailInputs()">
                            <div class="card-content">
                                <span class="icon">üü¢</span><span class="title">Pe≈Çna (24h)</span>
                            </div>
                        </label>
                        <label class="avail-radio-card">
                            <input type="radio" name="availType" value="partial" onchange="app.toggleAvailInputs()">
                            <div class="card-content">
                                <span class="icon">üü°</span><span class="title">Czƒô≈õciowa</span>
                            </div>
                        </label>
                        <label class="avail-radio-card">
                            <input type="radio" name="availType" value="none" onchange="app.toggleAvailInputs()">
                            <div class="card-content">
                                <span class="icon">üî¥</span><span class="title">Brak</span>
                            </div>
                        </label>
                    </div>
                    <div id="availTimeInputs" class="mt-3 hidden fade-in">
                        <label class="form-label">Godziny:</label>
                        <div class="time-range-row">
                            <input type="time" id="availStart" class="form-input" value="07:00">
                            <span>-</span>
                            <input type="time" id="availEnd" class="form-input" value="19:00">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ghost" onclick="app.closeModal('modalAvailEdit')">Anuluj</button>
                    <button class="btn btn-primary" onclick="app.saveAvailability()">Zapisz</button>
                </div>
            </div>
        </div>

    <script src="script.js"></script>
</body>
</html>
